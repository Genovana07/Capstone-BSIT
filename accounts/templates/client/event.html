{% extends 'client-base.html' %}

{% block title %}Dashboard{% endblock %}

{% block content %}
  <div class="calendar-header">
    <span id="month-name">February</span>
    <span id="year">2025</span>
    <div class="nav-buttons">
      <button id="todayBtn">Today</button>
      <button id="prevBtn">&lt;</button>
      <button id="nextBtn">&gt;</button>
    </div>
  </div>

  <!-- Calendar Grid -->
  <div class="calendar-grid" id="calendar">
    <!-- Calendar will be generated by JS -->
  </div>
  <style>
    .calendar-header {
      background-color: #000;
      color: white;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-radius: 5px;
      margin-top: 20px;
      height: 70px;
    }

    .calendar-header span {
      font-size: 1.5rem;
    }

    .nav-buttons button {
      padding: 6px 12px;
      background-color: white;
      color: black;
      border: none;
      border-radius: 3px;
      cursor: pointer;
      margin-left: 8px;
    }

    .nav-buttons button:hover {
      background-color: #ddd;
    }

    /* Calendar Grid */
    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      margin-top: 20px;
      border: 1px solid #ccc;
      gap: 5px;
    }

    .day-name, .day {
      padding: 15px;
      border: 1px solid #e0e0e0;
      text-align: center;
      min-height: 60px;
      font-size: 1.1rem;
    }

    .day-name {
      background-color: #f0f0f0;
      font-weight: bold;
    }

    /* Highlight Today */
    .today {
      background-color: #e0f7fa;
      border: 2px solid #00acc1;
      font-weight: bold;
    }

    /* Responsive Design for smaller screens */
    @media (max-width: 768px) {
      .calendar-header {
        flex-direction: column;
        text-align: center;
      }

      .calendar-grid {
        grid-template-columns: repeat(5, 1fr);
      }

      .day-name, .day {
        padding: 10px;
        font-size: 0.9rem;
      }
    }
  </style>
  <script>
    const calendar = document.getElementById("calendar");
    const monthLabel = document.getElementById("month-name");
    const yearLabel = document.getElementById("year");
    const todayBtn = document.getElementById("todayBtn");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");

    const months = [
      "January", "February", "March", "April", "May", "June",
      "July", "August", "September", "October", "November", "December"
    ];

    let currentDate = new Date();

    function renderCalendar(date) {
      const year = date.getFullYear();
      const month = date.getMonth();
      const firstDay = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month + 1, 0).getDate();

      calendar.innerHTML = "";

      // Weekday names
      const dayNames = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
      dayNames.forEach(day => {
        const div = document.createElement("div");
        div.classList.add("day-name");
        div.textContent = day;
        calendar.appendChild(div);
      });

      // Empty cells for the days before the first of the month
      for (let i = 0; i < firstDay; i++) {
        const empty = document.createElement("div");
        empty.classList.add("day");
        empty.style.visibility = "hidden";
        calendar.appendChild(empty);
      }

      // Days of the month
      for (let i = 1; i <= daysInMonth; i++) {
        const dayBox = document.createElement("div");
        dayBox.classList.add("day");
        dayBox.textContent = i;

        // Highlight today's date
        const isToday =
          i === new Date().getDate() &&
          month === new Date().getMonth() &&
          year === new Date().getFullYear();

        if (isToday) {
          dayBox.classList.add("today");
        }

        calendar.appendChild(dayBox);
      }

      monthLabel.textContent = months[month];
      yearLabel.textContent = year;
    }

    todayBtn.addEventListener("click", () => {
      currentDate = new Date();
      renderCalendar(currentDate);
    });

    prevBtn.addEventListener("click", () => {
      currentDate.setMonth(currentDate.getMonth() - 1);
      renderCalendar(currentDate);
    });

    nextBtn.addEventListener("click", () => {
      currentDate.setMonth(currentDate.getMonth() + 1);
      renderCalendar(currentDate);
    });

    // Initial render of the calendar
    renderCalendar(currentDate);
  </script>
{% endblock %}
